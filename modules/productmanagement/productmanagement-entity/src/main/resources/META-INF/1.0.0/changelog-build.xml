<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

	<!-- SEQUENCES -->

	<changeSet id="SEQUENCES" author="admin" context="build">
		<createSequence sequenceName="PM_PRODUCT_ID_SEQ" startValue="1" incrementBy="1" />
		<createSequence sequenceName="PM_CATEGORY_ID_SEQ" startValue="1" incrementBy="1" />
	</changeSet>

	<!-- TABLES -->

	<changeSet id="TABLES" author="admin" context="build">
		<!-- PRODUCT -->
		<createTable tableName="PM_PRODUCT">
			<column name="PRODUCTID" type="NUMBER(20, 0)">
				<constraints nullable="false" />
			</column>
			<column name="CATEGORYID" type="NUMBER(20, 0)">
				<constraints nullable="false" />
			</column>
			<column name="PRODUCTNAME" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
			<column name="PRODUCTPRICE" type="DECIMAL(6,2)">
				<constraints nullable="false" />
			</column>
		</createTable>
		<!-- CATEGORY -->
		<createTable tableName="PM_CATEGORY">
			<column name="CATEGORYID" type="NUMBER(20, 0)">
				<constraints nullable="false" />
			</column>
			<column name="CATEGORYNAME" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<!-- CONSTRAINTS -->

	<changeSet id="PK_SAMPLE_ID" author="admin" context="build">
		<!-- PRIMARY KEYS -->
		<addPrimaryKey 
			constraintName="PM_PRODUCT_PK" 
			tableName="PM_PRODUCT"
			columnNames="PRODUCTID" />
		<addPrimaryKey 
			constraintName="PM_CATEGORY_PK"
			tableName="PM_CATEGORY"
			columnNames="CATEGORYID" />
		<!-- FOREIGN KEYS -->
		<addForeignKeyConstraint
			constraintName="PM_PRODUCT_CATEGORY_ID_FK"
			referencedTableName="PM_CATEGORY" baseColumnNames="CATEGORYID"
			baseTableName="PM_PRODUCT" referencedColumnNames="CATEGORYID"
			onDelete="CASCADE" onUpdate="CASCADE" />
	</changeSet>

</databaseChangeLog>